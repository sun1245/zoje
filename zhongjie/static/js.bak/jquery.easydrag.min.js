(function(d){var b=false;var f=null;var h={};var k={};var j={};var l;var i;var g;var a;var e={};var c=false;d.getMousePosition=function(n){var m=0;var o=0;if(!n){var n=window.event}if(n.pageX||n.pageY){m=n.pageX;o=n.pageY}else{if(n.clientX||n.clientY){m=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;o=n.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return{x:m,y:o}};d.updatePosition=function(n){var p=d.getMousePosition(n);var o=(p.x-l);var m=(p.y-i);d(f).css("top",(g+m));d(f).css("left",(a+o))};d(document).mousemove(function(m){if(b&&e[f.id]!="false"){d.updatePosition(m);if(k[f.id]!=undefined){k[f.id](m,f)}return false}});d(document).mouseup(function(m){if(b&&e[f.id]!="false"){b=false;if(h[f.id]!=undefined){h[f.id](m,f)}return false}});d.fn.ondrag=function(m){return this.each(function(){k[this.id]=m})};d.fn.ondrop=function(m){return this.each(function(){h[this.id]=m})};d.fn.dragOff=function(){return this.each(function(){e[this.id]="off"})};d.fn.dragOn=function(){return this.each(function(){e[this.id]="on"})};d.fn.setHandler=function(m){return this.each(function(){var n=this;j[this.id]=true;d(n).css("cursor","");e[n.id]="handler";d("#"+m).css("cursor","move");d("#"+m).mousedown(function(o){c=true;d(n).trigger("mousedown",o)});d("#"+m).mouseup(function(o){c=false})})};d.fn.easydrag=function(m){return this.each(function(){if(undefined==this.id||!this.id.length){this.id="easydrag"+(new Date().getTime())}j[this.id]=m?true:false;e[this.id]="on";d(this).css("cursor","move");d(this).mousedown(function(n){if((e[this.id]=="off")||(e[this.id]=="handler"&&!c)){return j[this.id]}d(this).css("position","absolute");d(this).css("z-index",parseInt(new Date().getTime()/1000));b=true;f=this;var o=d.getMousePosition(n);l=o.x;i=o.y;g=this.offsetTop;a=this.offsetLeft;d.updatePosition(n);return j[this.id]})})}})(jQuery);